(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-users-user_address-index"],{"0e30":function(e,t,i){"use strict";var a=i("fa15"),n=i.n(a);n.a},2319:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){}));var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticStyle:{"touch-action":"none"}},[i("v-uni-view",{staticClass:"home",staticStyle:{position:"fixed"},style:{top:e.top+"px"},attrs:{id:"right-nav"},on:{touchmove:function(t){t.stopPropagation(),t.preventDefault(),arguments[0]=t=e.$handleEvent(t),e.setTouchMove.apply(void 0,arguments)}}},[e.homeActive?i("v-uni-view",{staticClass:"homeCon bg-color-red",class:!0===e.homeActive?"on":""},[i("v-uni-navigator",{staticClass:"iconfont icon-shouye-xianxing",attrs:{"hover-class":"none",url:"/pages/index/index","open-type":"switchTab"}}),i("v-uni-navigator",{staticClass:"iconfont icon-caigou-xianxing",attrs:{"hover-class":"none",url:"/pages/order_addcart/order_addcart","open-type":"switchTab"}}),i("v-uni-navigator",{staticClass:"iconfont icon-yonghu1",attrs:{"hover-class":"none",url:"/pages/user/index","open-type":"switchTab"}})],1):e._e(),i("v-uni-view",{staticClass:"pictrueBox",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.open.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"pictrue"},[i("v-uni-image",{staticClass:"image",attrs:{src:!0===e.homeActive?"/static/images/close.gif":"/static/images/open.gif"}})],1)],1)],1)],1)},n=[]},"596c":function(e,t,i){"use strict";i("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i("26cb"),n={name:"Home",props:{},data:function(){return{top:"500"}},computed:(0,a.mapGetters)(["homeActive"]),methods:{setTouchMove:function(e){e.touches[0].clientY<545&&e.touches[0].clientY>66&&(this.top=e.touches[0].clientY)},open:function(){this.homeActive?this.$store.commit("CLOSE_HOME"):this.$store.commit("OPEN_HOME")}}};t.default=n},"5aed":function(e,t,i){"use strict";i.r(t);var a=i("596c"),n=i.n(a);for(var s in a)["default"].indexOf(s)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(s);t["default"]=n.a},6338:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){}));var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("v-uni-form",{attrs:{"report-submit":"true"},on:{submit:function(t){arguments[0]=t=e.$handleEvent(t),e.formSubmit.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"addAddress pad30"},[i("v-uni-view",{staticClass:"list borRadius14"},[i("v-uni-view",{staticClass:"item acea-row row-between-wrapper",staticStyle:{border:"none"}},[i("v-uni-view",{staticClass:"name"},[e._v("姓名")]),i("v-uni-input",{attrs:{type:"text",placeholder:"请输入姓名","placeholder-style":"color:#ccc;",name:"name",value:e.userAddress.name,"placeholder-class":"placeholder",maxlength:"4"}})],1),i("v-uni-view",{staticClass:"item acea-row row-between-wrapper"},[i("v-uni-view",{staticClass:"name"},[e._v("联系电话")]),i("v-uni-input",{attrs:{type:"number",placeholder:"请输入联系电话","placeholder-style":"color:#ccc;",name:"mobile",value:e.userAddress.mobile,"placeholder-class":"placeholder",maxlength:"11"}})],1),i("v-uni-view",{staticClass:"item acea-row row-between-wrapper relative"},[i("v-uni-view",{staticClass:"name"},[e._v("所在地区")]),i("v-uni-view",{staticClass:"address"},[i("v-uni-picker",{attrs:{mode:"multiSelector",range:e.multiArray},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.bindRegionChange.apply(void 0,arguments)},columnchange:function(t){arguments[0]=t=e.$handleEvent(t),e.bindMultiPickerColumnChange.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"acea-row"},[i("v-uni-view",{staticClass:"picker line1"},[e._v(e._s(e.region[0])+"，"+e._s(e.region[1])+"，"+e._s(e.region[2]))]),i("v-uni-view",{staticClass:"iconfont icon-xiangyou abs_right"})],1)],1)],1)],1),i("v-uni-view",{staticClass:"item acea-row row-between-wrapper relative"},[i("v-uni-view",{staticClass:"name"},[e._v("详细地址")]),i("v-uni-input",{attrs:{type:"text",placeholder:"请填写具体地址","placeholder-style":"color:#ccc;",name:"detailAddress","placeholder-class":"placeholder",maxlength:"18"},model:{value:e.userAddress.detailAddress,callback:function(t){e.$set(e.userAddress,"detailAddress",t)},expression:"userAddress.detailAddress"}}),i("v-uni-view",{staticClass:"iconfont icon-dizhi font-color abs_right",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseLocation.apply(void 0,arguments)}}})],1)],1),i("v-uni-view",{staticClass:"default acea-row row-middle borRadius14"},[i("v-uni-checkbox-group",{on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.ChangeIsDefault.apply(void 0,arguments)}}},[i("v-uni-checkbox",{attrs:{checked:e.userAddress.defaultStatus}}),e._v("设置为默认地址")],1)],1),i("v-uni-button",{staticClass:"keepBnt bg-color",attrs:{"form-type":"submit"}},[e._v("立即保存")]),this.$wechat.isWeixin()&&!e.id?i("v-uni-view",{staticClass:"wechatAddress",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getAddress.apply(void 0,arguments)}}},[e._v("导入微信地址")]):e._e()],1)],1)],1)},n=[]},ba0a:function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,".pictrueBox[data-v-651482e7]{width:%?130?%;height:%?120?%}\n\n/*返回主页按钮*/.home[data-v-651482e7]{position:fixed;color:#fff;text-align:center;z-index:9999;right:%?15?%;display:flex}.home .homeCon[data-v-651482e7]{border-radius:%?50?%;opacity:0;height:0;color:$theme-color;width:0}.home .homeCon.on[data-v-651482e7]{opacity:1;-webkit-animation:bounceInRight .5s cubic-bezier(.215,.61,.355,1);animation:bounceInRight .5s cubic-bezier(.215,.61,.355,1);width:%?300?%;height:%?86?%;margin-bottom:%?20?%;display:flex;justify-content:center;align-items:center;background:#f44939!important}.home .homeCon .iconfont[data-v-651482e7]{font-size:%?48?%;color:#fff;display:inline-block;margin:0 auto}.home .pictrue[data-v-651482e7]{width:%?86?%;height:%?86?%;border-radius:50%;margin:0 auto}.home .pictrue .image[data-v-651482e7]{width:100%;height:100%;border-radius:50%;-webkit-transform:rotate(90deg);transform:rotate(90deg);ms-transform:rotate(90deg);moz-transform:rotate(90deg);webkit-transform:rotate(90deg);o-transform:rotate(90deg)}",""]),e.exports=t},c64c:function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* crmeb颜色变量 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.addAddress[data-v-7e8104e9]{padding-top:%?20?%}.addAddress .list[data-v-7e8104e9]{background-color:#fff;padding:0 %?24?%}.addAddress .list .item[data-v-7e8104e9]{border-top:%?1?% solid #eee;height:%?90?%;line-height:%?90?%}.addAddress .list .item .name[data-v-7e8104e9]{font-size:%?30?%;color:#333}.addAddress .list .item .address[data-v-7e8104e9]{flex:1;margin-left:%?50?%}.addAddress .list .item uni-input[data-v-7e8104e9]{width:%?475?%;font-size:%?30?%;font-weight:400}.addAddress .list .item .placeholder[data-v-7e8104e9]{color:#ccc}.addAddress .list .item uni-picker .picker[data-v-7e8104e9]{width:%?410?%;font-size:%?30?%}.addAddress .default[data-v-7e8104e9]{padding:0 %?30?%;height:%?90?%;background-color:#fff;margin-top:%?23?%}.addAddress .default uni-checkbox[data-v-7e8104e9]{margin-right:%?15?%}.addAddress .keepBnt[data-v-7e8104e9]{width:%?690?%;height:%?86?%;border-radius:%?50?%;text-align:center;line-height:%?86?%;margin:%?80?% auto %?24?% auto;font-size:%?32?%;color:#fff}.addAddress .wechatAddress[data-v-7e8104e9]{width:%?690?%;height:%?86?%;border-radius:%?50?%;text-align:center;line-height:%?86?%;margin:0 auto;font-size:%?32?%;color:#e93323;border:1px solid #e93323}.relative[data-v-7e8104e9]{position:relative}.icon-dizhi[data-v-7e8104e9]{font-size:%?44?%;z-index:100}.abs_right[data-v-7e8104e9]{position:absolute;right:0}',""]),e.exports=t},c985:function(e,t,i){"use strict";i.r(t);var a=i("2319"),n=i("5aed");for(var s in n)["default"].indexOf(s)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(s);i("d869");var r=i("f0c5"),d=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"651482e7",null,!1,a["a"],void 0);t["default"]=d.exports},ca50:function(e,t,i){"use strict";(function(e){i("7a82");var a=i("4ea4").default,n=i("dbce").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("ac1f"),i("00b4"),i("d3b7"),i("159b"),i("14d9"),i("d81d"),i("5319");var s=i("6ca7a"),r=n(i("d82a")),d=n(i("fc89")),o=i("4844"),c=i("26cb"),u=a(i("c985")),l=(getApp(),{components:{home:u.default},data:function(){return{id:0,district:[],userAddress:{defaultStatus:!1},region:["省","市","区"],multiArray:[],multiIndex:[0,0,0],cityId:0,cartId:"",pinkId:0,couponId:0,bargain:!1,combination:!1,secKill:!1}},computed:(0,c.mapGetters)(["isLogin"]),watch:{isLogin:{handler:function(e,t){e&&(this.getUserAddress(),this.getCityList())},deep:!0}},onLoad:function(e){this.isLogin?(this.preOrderNo=e.preOrderNo||0,this.id=e.id||0,uni.setNavigationBarTitle({title:e.id?"修改地址":"添加地址"}),this.getUserAddress(),this.$Cache.has("cityList")?(this.district=this.$Cache.getItem("cityList"),this.initialize()):this.getCityList()):(0,o.toLogin)()},methods:{getUserAddress:function(){var e=this;if(!this.id)return!1;r.getAddress(this.id).then((function(t){e.$set(e,"userAddress",t.data),e.$set(e,"region",t.data.areaName.split(" ")),e.city_id=t.data.areaId}))},formSubmit:function(e){var t=this,i=e.detail.value;if(!i.name)return this.$util.Tips({title:"请填写收货人姓名"});if(!i.mobile)return this.$util.Tips({title:"请填写联系电话"});if(!/^1(3|4|5|7|8|9|6)\d{9}$/i.test(i.mobile))return this.$util.Tips({title:"请输入正确的手机号码"});if("省-市-区"===this.region)return this.$util.Tips({title:"请选择所在地区"});if(!i.detailAddress)return this.$util.Tips({title:"请填写详细地址"});i.id=this.id,i.areaId=this.cityId,i.defaultStatus=this.userAddress.defaultStatus,uni.showLoading({title:"保存中",mask:!0});var a=this.id>0?r.updateAddress:r.createAddress;a(i).then((function(e){t.id?t.$util.Tips({title:"修改成功",icon:"success"}):t.$util.Tips({title:"添加成功",icon:"success"}),setTimeout((function(){if(!(t.preOrderNo>0))return history.back();uni.redirectTo({url:"/pages/users/order_confirm/index?preOrderNo="+t.preOrderNo+"&addressId="+(t.id?t.id:e.data)})}),1e3)})).catch((function(e){return t.$util.Tips({title:e})}))},ChangeIsDefault:function(e){this.$set(this.userAddress,"defaultStatus",!this.userAddress.defaultStatus)},getCityList:function(){var e=this;d.getAreaTree().then((function(t){e.district=t.data;e.$Cache.setItem({name:"cityList",value:t.data,expires:6048e5}),e.initialize()}))},initialize:function(){var e=[],t=[],i=[];if(this.district.length){this.district.forEach((function(t){e.push(t.name)}));var a=this.district[0].children||[];a.forEach((function(e){t.push(e.name)}));var n=a.length&&a[0].children||[];n.forEach((function(e){i.push(e.name)})),this.multiArray=[e,t,i]}},bindRegionChange:function(e){var t=this.multiIndex,i=this.multiArray,a=e.detail.value,n=this.district[t[0]]||{children:[]},s=n.children[t[1]]||{children:[]},r=s.children[t[2]]||{id:0};this.region=[i[0][a[0]],i[1][a[1]],i[2][a[2]]],this.cityId=r.id},bindMultiPickerColumnChange:function(e){var t=e.detail.column,i=e.detail.value,a=this.multiArray,n=this.multiIndex;switch(n[t]=i,t){case 0:var s=this.district[i]||{child:[]},r=s.children[0]||{child:[]};a[1]=s.children.map((function(e){return e.name})),a[2]=r.children.map((function(e){return e.name}));break;case 1:var d=this.district[n[0]].children[n[1]].children||[];a[2]=d.map((function(e){return e.name}));break;case 2:break}this.multiArray=a,this.multiIndex=n},chooseLocation:function(){var e=this;uni.chooseLocation({success:function(t){e.$set(e.userAddress,"detailAddress",t.address.replace(/.+?(省|市|自治区|自治州|县|区)/g,""))}})},getWxAddress:function(){var e=this;uni.authorize({scope:"scope.address",success:function(t){uni.chooseAddress({success:function(t){var i={};i.province=t.provinceName,i.city=t.cityName,i.district=t.countyName,i.cityId=0,(0,s.editAddress)({address:i,defaultStatus:1,name:t.userName,postCode:t.postalCode,mobile:t.telNumber,detail:t.detailInfo,id:0}).then((function(t){return setTimeout((function(){if(e.cartId){var i=e.cartId,a=e.pinkId,n=e.couponId;e.cartId="",e.pinkId="",e.couponId="",uni.navigateTo({url:"/pages/users/order_confirm/index?cartId="+i+"&addressId="+(e.id?e.id:t.data.id)+"&pinkId="+a+"&couponId="+n+"&secKill="+e.secKill+"&combination="+e.combination+"&bargain="+e.bargain})}else uni.navigateBack({delta:1})}),1e3),e.$util.Tips({title:"添加成功",icon:"success"})})).catch((function(t){return e.$util.Tips({title:t})}))},fail:function(t){if("chooseAddress:cancel"==t.errMsg)return e.$util.Tips({title:"取消选择"})}})},fail:function(t){uni.showModal({title:"您已拒绝导入微信地址权限",content:"是否进入权限管理，调整授权？",success:function(t){if(t.confirm)uni.openSetting({success:function(e){}});else if(t.cancel)return e.$util.Tips({title:"已取消！"})}})}})},getAddress:function(){var t=this,i=this;i.$wechat.openAddress().then((function(e){(0,s.editAddress)({id:t.id,name:e.userName,mobile:e.telNumber,address:{province:e.provinceName,city:e.cityName,district:e.countryName,cityId:0},detail:e.detailInfo,defaultStatus:1,postCode:e.postalCode}).then((function(){setTimeout((function(){if(i.cartId){var e=i.cartId,t=i.pinkId,a=i.couponId;i.cartId="",i.pinkId="",i.couponId="",uni.navigateTo({url:"/pages/users/order_confirm/index?cartId="+e+"&addressId="+(i.id?i.id:res.data.id)+"&pinkId="+t+"&couponId="+a+"&secKill="+i.secKill+"&combination="+i.combination+"&bargain="+i.bargain})}else uni.navigateTo({url:"/pages/users/user_address_list/index"})}),1e3),i.$util.Tips({title:"添加成功",icon:"success"})})).catch((function(e){return i.$util.Tips({title:e||"添加失败"})}))})).catch((function(t){e.log(t)}))}}});t.default=l}).call(this,i("5a52")["default"])},d82a:function(e,t,i){"use strict";i("7a82");var a=i("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.createAddress=function(e){return n.default.post("app-api/member/address/create",e)},t.deleteAddress=function(e){return n.default.delete("app-api/member/address/delete?id="+e,{})},t.getAddress=function(e){return n.default.get("app-api/member/address/get",{id:e})},t.getAddressList=function(){return n.default.get("app-api/member/address/list",{})},t.getDefaultUserAddress=function(){return n.default.get("app-api/member/address/get-default",{})},t.updateAddress=function(e){return n.default.put("app-api/member/address/update",e)};var n=a(i("e145"))},d869:function(e,t,i){"use strict";var a=i("ff5d"),n=i.n(a);n.a},e9b3:function(e,t,i){"use strict";i.r(t);var a=i("ca50"),n=i.n(a);for(var s in a)["default"].indexOf(s)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(s);t["default"]=n.a},ec56:function(e,t,i){"use strict";i.r(t);var a=i("6338"),n=i("e9b3");for(var s in n)["default"].indexOf(s)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(s);i("0e30");var r=i("f0c5"),d=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"7e8104e9",null,!1,a["a"],void 0);t["default"]=d.exports},fa15:function(e,t,i){var a=i("c64c");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("4f06").default;n("760009f8",a,!0,{sourceMap:!1,shadowMode:!1})},fc89:function(e,t,i){"use strict";i("7a82");var a=i("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.getAreaTree=function(){return n.default.get("app-api/system/area/tree",{},{noAuth:!0})};var n=a(i("e145"))},ff5d:function(e,t,i){var a=i("ba0a");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("4f06").default;n("6bac4ae5",a,!0,{sourceMap:!1,shadowMode:!1})}}]);