(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-users-user_get_coupon-index"],{"0831":function(t,n,e){"use strict";e.r(n);var i=e("a1aa"),o=e.n(i);for(var r in i)["default"].indexOf(r)<0&&function(t){e.d(n,t,(function(){return i[t]}))}(r);n["default"]=o.a},1883:function(t,n,e){"use strict";e.d(n,"b",(function(){return i})),e.d(n,"c",(function(){return o})),e.d(n,"a",(function(){}));var i=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("v-uni-view",[i("v-uni-view",{staticClass:"acea-row row-around nav"},[t._l(t.navList,(function(n){return[i("v-uni-view",{key:n.type,class:["acea-row","row-middle",t.type===n.type?"on":""],on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setType(n.type)}}},[t._v(t._s(n.name))])]}))],2),i("v-uni-view",{staticStyle:{height:"106rpx"}}),t.couponsList.length?i("v-uni-view",{staticClass:"coupon-list"},t._l(t.couponsList,(function(n,e){return i("v-uni-view",{key:e,staticClass:"item acea-row row-center-wrapper"},[i("v-uni-view",{staticClass:"money",class:n.canTake?"":"moneyGray"},[i("v-uni-view",[t._v("￥"),1===n.discountType?i("v-uni-text",{staticClass:"num"},[t._v(t._s(t.fen2yuan(n.discountPrice)))]):i("v-uni-text",{staticClass:"num"},[t._v(t._s((n.discountPercent/10).toFixed(1))+" 折")])],1),i("v-uni-view",{staticClass:"pic-num"},[t._v("满 "+t._s(t.fen2yuan(n.usePrice))+" 元可用")])],1),i("v-uni-view",{staticClass:"text"},[i("v-uni-view",{staticClass:"condition line2"},[1===t.type?i("span",{staticClass:"line-title",class:n.canTake?"":"gray"},[t._v("通用")]):3===t.type?i("span",{staticClass:"line-title",class:n.canTake?"":"gray"},[t._v("品类")]):i("span",{staticClass:"line-title",class:n.canTake?"":"gray"},[t._v("商品")]),i("span",[t._v(t._s(n.name))])]),i("v-uni-view",{staticClass:"data acea-row row-between-wrapper"},[n.validityType>1?i("v-uni-view",[t._v("领取后 "+t._s(n.fixedEndTerm)+" 天内可用")]):i("v-uni-view",[t._v(t._s(t.formatDate(n.validStartTime)+" - "+t.formatDate(n.validEndTime)))]),n.canTake?i("v-uni-view",{staticClass:"bnt bg-color",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.getCoupon(n.id,e)}}},[t._v("立即领取")]):i("v-uni-view",{staticClass:"bnt gray"},[t._v("已领取")])],1)],1)],1)})),1):t._e(),i("v-uni-view",{staticClass:"loadingicon acea-row row-center-wrapper"},[i("v-uni-text",{staticClass:"loading iconfont icon-jiazai",attrs:{hidden:!t.loading}}),t._v(t._s(t.couponsList.length?t.loadTitle:""))],1),t.couponsList.length||!t.isShow||t.loading?t._e():i("v-uni-view",{staticClass:"noCommodity"},[i("v-uni-view",{staticClass:"pictrue"},[i("v-uni-image",{attrs:{src:e("d74d")}})],1)],1)],1)},o=[]},"2a25":function(t,n,e){"use strict";var i=e("b59e"),o=e.n(i);o.a},"6dee":function(t,n,e){"use strict";e.r(n);var i=e("1883"),o=e("0831");for(var r in o)["default"].indexOf(r)<0&&function(t){e.d(n,t,(function(){return o[t]}))}(r);e("2a25");var a=e("f0c5"),s=Object(a["a"])(o["default"],i["b"],i["c"],!1,null,"56339445",null,!1,i["a"],void 0);n["default"]=s.exports},"7ae6":function(t,n,e){var i,o,r=e("7037").default;e("a9e3"),e("ac1f"),e("5319"),e("00b4"),e("466d"),e("d401"),e("d3b7"),e("25f0"),e("fb6a"),e("f4b3"),e("bf19"),function(a,s){"object"==r(n)&&"undefined"!=typeof t?t.exports=s():(i=s,o="function"===typeof i?i.call(n,e,n,t):i,void 0===o||(t.exports=o))}(0,(function(){"use strict";var t="millisecond",n="second",e="minute",i="hour",o="day",a="week",s="month",u="quarter",c="year",f=/^(\d{4})-?(\d{1,2})-?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d{1,3})?$/,d=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,l=function(t,n,e){var i=String(t);return!i||i.length>=n?t:""+Array(n+1-i.length).join(e)+t},h={s:l,z:function(t){var n=-t.utcOffset(),e=Math.abs(n),i=Math.floor(e/60),o=e%60;return(n<=0?"+":"-")+l(i,2,"0")+":"+l(o,2,"0")},m:function(t,n){var e=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(e,s),o=n-i<0,r=t.clone().add(e+(o?-1:1),s);return Number(-(e+(n-i)/(o?i-r:r-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(r){return{M:s,y:c,w:a,d:o,D:"date",h:i,m:e,s:n,ms:t,Q:u}[r]||String(r||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},p={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},v="en",g={};g[v]=p;var m=function(t){return t instanceof b},$=function(t,n,e){var i;if(!t)return v;if("string"==typeof t)g[t]&&(i=t),n&&(g[t]=n,i=t);else{var o=t.name;g[o]=t,i=o}return!e&&i&&(v=i),i||!e&&v},y=function(t,n){if(m(t))return t.clone();var e="object"==r(n)?n:{};return e.date=t,e.args=arguments,new b(e)},w=h;w.l=$,w.i=m,w.w=function(t,n){return y(t,{locale:n.$L,utc:n.$u,$offset:n.$offset})};var b=function(){function r(t){this.$L=this.$L||$(t.locale,null,!0),this.parse(t)}var l=r.prototype;return l.parse=function(t){this.$d=function(t){var n=t.date,e=t.utc;if(null===n)return new Date(NaN);if(w.u(n))return new Date;if(n instanceof Date)return new Date(n);if("string"==typeof n&&!/Z$/i.test(n)){var i=n.match(f);if(i)return e?new Date(Date.UTC(i[1],i[2]-1,i[3]||1,i[4]||0,i[5]||0,i[6]||0,i[7]||0)):new Date(i[1],i[2]-1,i[3]||1,i[4]||0,i[5]||0,i[6]||0,i[7]||0)}return new Date(n)}(t),this.init()},l.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},l.$utils=function(){return w},l.isValid=function(){return!("Invalid Date"===this.$d.toString())},l.isSame=function(t,n){var e=y(t);return this.startOf(n)<=e&&e<=this.endOf(n)},l.isAfter=function(t,n){return y(t)<this.startOf(n)},l.isBefore=function(t,n){return this.endOf(n)<y(t)},l.$g=function(t,n,e){return w.u(t)?this[n]:this.set(e,t)},l.year=function(t){return this.$g(t,"$y",c)},l.month=function(t){return this.$g(t,"$M",s)},l.day=function(t){return this.$g(t,"$W",o)},l.date=function(t){return this.$g(t,"$D","date")},l.hour=function(t){return this.$g(t,"$H",i)},l.minute=function(t){return this.$g(t,"$m",e)},l.second=function(t){return this.$g(t,"$s",n)},l.millisecond=function(n){return this.$g(n,"$ms",t)},l.unix=function(){return Math.floor(this.valueOf()/1e3)},l.valueOf=function(){return this.$d.getTime()},l.startOf=function(t,r){var u=this,f=!!w.u(r)||r,d=w.p(t),l=function(t,n){var e=w.w(u.$u?Date.UTC(u.$y,n,t):new Date(u.$y,n,t),u);return f?e:e.endOf(o)},h=function(t,n){return w.w(u.toDate()[t].apply(u.toDate("s"),(f?[0,0,0,0]:[23,59,59,999]).slice(n)),u)},p=this.$W,v=this.$M,g=this.$D,m="set"+(this.$u?"UTC":"");switch(d){case c:return f?l(1,0):l(31,11);case s:return f?l(1,v):l(0,v+1);case a:var $=this.$locale().weekStart||0,y=(p<$?p+7:p)-$;return l(f?g-y:g+(6-y),v);case o:case"date":return h(m+"Hours",0);case i:return h(m+"Minutes",1);case e:return h(m+"Seconds",2);case n:return h(m+"Milliseconds",3);default:return this.clone()}},l.endOf=function(t){return this.startOf(t,!1)},l.$set=function(r,a){var u,f=w.p(r),d="set"+(this.$u?"UTC":""),l=(u={},u[o]=d+"Date",u.date=d+"Date",u[s]=d+"Month",u[c]=d+"FullYear",u[i]=d+"Hours",u[e]=d+"Minutes",u[n]=d+"Seconds",u[t]=d+"Milliseconds",u)[f],h=f===o?this.$D+(a-this.$W):a;if(f===s||f===c){var p=this.clone().set("date",1);p.$d[l](h),p.init(),this.$d=p.set("date",Math.min(this.$D,p.daysInMonth())).toDate()}else l&&this.$d[l](h);return this.init(),this},l.set=function(t,n){return this.clone().$set(t,n)},l.get=function(t){return this[w.p(t)]()},l.add=function(t,r){var u,f=this;t=Number(t);var d=w.p(r),l=function(n){var e=y(f);return w.w(e.date(e.date()+Math.round(n*t)),f)};if(d===s)return this.set(s,this.$M+t);if(d===c)return this.set(c,this.$y+t);if(d===o)return l(1);if(d===a)return l(7);var h=(u={},u[e]=6e4,u[i]=36e5,u[n]=1e3,u)[d]||1,p=this.$d.getTime()+t*h;return w.w(p,this)},l.subtract=function(t,n){return this.add(-1*t,n)},l.format=function(t){var n=this;if(!this.isValid())return"Invalid Date";var e=t||"YYYY-MM-DDTHH:mm:ssZ",i=w.z(this),o=this.$locale(),r=this.$H,a=this.$m,s=this.$M,u=o.weekdays,c=o.months,f=function(t,i,o,r){return t&&(t[i]||t(n,e))||o[i].substr(0,r)},l=function(t){return w.s(r%12||12,t,"0")},h=o.meridiem||function(t,n,e){var i=t<12?"AM":"PM";return e?i.toLowerCase():i},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:w.s(s+1,2,"0"),MMM:f(o.monthsShort,s,c,3),MMMM:c[s]||c(this,e),D:this.$D,DD:w.s(this.$D,2,"0"),d:String(this.$W),dd:f(o.weekdaysMin,this.$W,u,2),ddd:f(o.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(r),HH:w.s(r,2,"0"),h:l(1),hh:l(2),a:h(r,a,!0),A:h(r,a,!1),m:String(a),mm:w.s(a,2,"0"),s:String(this.$s),ss:w.s(this.$s,2,"0"),SSS:w.s(this.$ms,3,"0"),Z:i};return e.replace(d,(function(t,n){return n||p[t]||i.replace(":","")}))},l.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},l.diff=function(t,r,f){var d,l=w.p(r),h=y(t),p=6e4*(h.utcOffset()-this.utcOffset()),v=this-h,g=w.m(this,h);return g=(d={},d[c]=g/12,d[s]=g,d[u]=g/3,d[a]=(v-p)/6048e5,d[o]=(v-p)/864e5,d[i]=v/36e5,d[e]=v/6e4,d[n]=v/1e3,d)[l]||v,f?g:w.a(g)},l.daysInMonth=function(){return this.endOf(s).$D},l.$locale=function(){return g[this.$L]},l.locale=function(t,n){if(!t)return this.$L;var e=this.clone(),i=$(t,n,!0);return i&&(e.$L=i),e},l.clone=function(){return w.w(this.$d,this)},l.toDate=function(){return new Date(this.valueOf())},l.toJSON=function(){return this.isValid()?this.toISOString():null},l.toISOString=function(){return this.$d.toISOString()},l.toString=function(){return this.$d.toUTCString()},r}();return y.prototype=b.prototype,y.extend=function(t,n){return t(n,b,y),y},y.locale=$,y.isDayjs=m,y.unix=function(t){return y(1e3*t)},y.en=g[v],y.Ls=g,y}))},a1aa:function(t,n,e){"use strict";e("7a82");var i=e("4ea4").default,o=e("dbce").default;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("4844"),a=e("26cb"),s=o(e("bd60")),u=o(e("5b92")),c=i(e("7ae6")),f={data:function(){return{couponsList:[],loading:!1,loadend:!1,loadTitle:"加载更多",page:1,limit:20,type:1,isShow:!1,navList:[{type:1,name:"通用券",count:0},{type:2,name:"商品券",count:0},{type:3,name:"品类券",count:0}],count:0}},computed:(0,a.mapGetters)(["isLogin"]),watch:{isLogin:{handler:function(t,n){t&&this.getUseCoupons()},deep:!0}},onLoad:function(){this.isLogin?this.getUseCoupons():(0,r.toLogin)()},onReachBottom:function(){this.getUseCoupons()},methods:{getCoupon:function(t,n){var e=this;s.takeCoupon(t).then((function(t){e.couponsList[n].canTake=t.data,e.$set(e,"couponsList",e.couponsList),e.$util.Tips({title:"领取成功"})})).catch((function(t){return e.$util.Tips({title:t})}))},getUseCoupons:function(){var t=this;if(this.loadend||this.loading)return!1;this.loading=!0,s.getCouponTemplatePage({pageNo:this.page,pageSize:this.limit,productScope:this.type}).then((function(n){var e=n.data.list,i=e.length<t.limit,o=t.$util.SplitArray(e,t.couponsList);t.$set(t,"couponsList",o),t.loadend=i,t.loadTitle=i?"我也是有底线的":"加载更多",t.page=t.page+1,t.loading=!1,t.isShow=!0})).catch((function(n){t.loading=!1,t.loadTitle="加载更多"}))},setType:function(t){this.type!==t&&(this.type=t,this.couponsList=[],this.page=1,this.loadend=!1,this.getUseCoupons())},fen2yuan:function(t){return u.fen2yuan(t)},formatDate:function(t){return(0,c.default)(t).format("YYYY-MM-DD")}}};n.default=f},b59e:function(t,n,e){var i=e("d3e8");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=e("4f06").default;o("3ef624ce",i,!0,{sourceMap:!1,shadowMode:!1})},bd60:function(t,n,e){"use strict";e("7a82");var i=e("4ea4").default;Object.defineProperty(n,"__esModule",{value:!0}),n.getCouponPage=function(t){return o.default.get("app-api/promotion/coupon/page",t)},n.getCouponTemplateList=function(t){return o.default.get("app-api/promotion/coupon-template/list",t,{noAuth:!0})},n.getCouponTemplatePage=function(t){return o.default.get("app-api/promotion/coupon-template/page",t,{noAuth:!0})},n.getMatchCouponList=function(t){return o.default.get("app-api/promotion/coupon/match-list",t)},n.getUnusedCouponCount=function(){return o.default.get("app-api/promotion/coupon/get-unused-count")},n.takeCoupon=function(t){return o.default.post("app-api/promotion/coupon/take",{templateId:t})};var o=i(e("e145"))},bf19:function(t,n,e){"use strict";var i=e("23e7"),o=e("c65b");i({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return o(URL.prototype.toString,this)}})},d3e8:function(t,n,e){var i=e("24fb");n=i(!1),n.push([t.i,".nav[data-v-56339445]{position:fixed;top:0;left:0;width:100%;height:%?106?%;background-color:#fff;font-size:%?30?%;color:#999;z-index:9}.nav .acea-row[data-v-56339445]{border-top:%?5?% solid transparent;border-bottom:%?5?% solid transparent;cursor:pointer}.nav .acea-row.on[data-v-56339445]{border-bottom-color:#e93323;color:#e93323}.condition .line-title[data-v-56339445]{width:%?90?%;padding:0 %?10?%;box-sizing:border-box;background:#fff7f7;border:1px solid #e83323;opacity:1;border-radius:%?20?%;font-size:%?20?%;color:#e83323;margin-right:%?12?%}.condition .line-title.gray[data-v-56339445]{border-color:#bbb;color:#bbb;background-color:#f5f5f5}.coupon-list .pic-num[data-v-56339445]{color:#fff;font-size:%?24?%}",""]),t.exports=n},d74d:function(t,n,e){t.exports=e.p+"static/img/noCoupon.27891225.png"},f4b3:function(t,n,e){"use strict";var i=e("23e7"),o=e("d039"),r=e("7b0b"),a=e("c04e"),s=o((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}));i({target:"Date",proto:!0,arity:1,forced:s},{toJSON:function(t){var n=r(this),e=a(n,"number");return"number"!=typeof e||isFinite(e)?n.toISOString():null}})}}]);