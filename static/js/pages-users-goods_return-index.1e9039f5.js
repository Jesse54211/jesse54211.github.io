(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-users-goods_return-index"],{"03a9":function(e,t,a){"use strict";a("7a82");var r=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.cancelOrder=function(e){return n.default.delete("app-api/trade/order/cancel?id="+e,{})},t.createOrder=function(e){return n.default.post("app-api/trade/order/create",e)},t.createOrderItemComment=function(e){return n.default.post("app-api/trade/order/item/create-comment",e)},t.deleteOrder=function(e){return n.default.delete("app-api/trade/order/delete?id="+e,{})},t.getOrderCount=function(){return n.default.get("app-api/trade/order/get-count")},t.getOrderDetail=function(e){return n.default.get("app-api/trade/order/get-detail",{id:e})},t.getOrderExpressTrackList=function(e){return n.default.get("app-api/trade/order/get-express-track-list",{id:e})},t.getOrderItem=function(e){return n.default.get("app-api/trade/order/item/get",{id:e})},t.getOrderPage=function(e){return n.default.get("app-api/trade/order/page",e)},t.receiveOrder=function(e){return n.default.put("app-api/trade/order/receive?id="+e,{})},t.settlementOrder=function(e){var t=(0,i.default)({},e);delete t.items;for(var a=0;a<e.items.length;a++)t["items["+a+"].skuId"]=e.items[a].skuId,t["items["+a+"].count"]=e.items[a].count,t["items["+a+"].cartId"]=e.items[a].cartId;return n.default.get("app-api/trade/order/settlement",t)};var i=r(a("5530")),n=r(a("e145"))},"2ca4":function(e,t,a){"use strict";a("7a82");var r=a("dbce").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("e25e"),a("7db0"),a("d3b7"),a("a434"),a("14d9");var i=a("4844"),n=a("26cb"),s=r(a("03a9")),o=r(a("ca02")),d=r(a("2f09")),u={data:function(){return{orderId:0,orderItemId:0,order:{},orderItem:{},wayIndex:0,ways:["仅退款","退款退货"],reasons:[],reasonIndex:0,applyPicUrls:[],tradeConfig:{}}},computed:(0,n.mapGetters)(["isLogin"]),watch:{isLogin:{handler:function(e,t){e&&(this.getOrderInfo(),this.getRefundReason())},deep:!0}},onLoad:function(e){if(this.isLogin){if(!e.orderId||!e.orderItemId)return this.$util.Tips({title:"缺少订单id,无法退款"},{tab:3,url:1});this.orderId=parseInt(e.orderId),this.orderItemId=parseInt(e.orderItemId),this.getOrderInfo(),this.getRefundReason(),this.getTradeConfig()}else(0,i.toLogin)()},methods:{onLoadFun:function(){this.getOrderInfo(),this.getRefundReason(),this.getTradeConfig()},getOrderInfo:function(){var e=this;s.getOrderDetail(this.orderId).then((function(t){var a=t.data;e.order=a,e.orderItem=a.items.find((function(t){return t.id===e.orderItemId}))||{}})).catch((function(t){return e.$util.Tips({title:t})}))},wayChange:function(e){this.$set(this,"wayIndex",e.detail.value),this.getRefundReason()},getWay:function(){return 0===this.wayIndex?10:20},getRefundReason:function(){var e=this.getWay();this.reasons=10===e?this.tradeConfig.afterSaleRefundReasons||[]:this.tradeConfig.afterSaleReturnReasons||[]},bindPickerChange:function(e){this.$set(this,"reasonIndex",e.detail.value)},getTradeConfig:function(){var e=this;d.getTradeConfig().then((function(t){e.tradeConfig=t.data||{},e.getRefundReason()}))},DelPic:function(e){this.applyPicUrls.splice(e,1)},uploadpic:function(){var e=this;this.$util.uploadImageOne({},(function(t){e.applyPicUrls.push(t.data),e.$set(e,"applyPicUrls",e.applyPicUrls)}))},subRefund:function(e){var t=this,a=e.detail.value;o.createAfterSale({orderItemId:this.orderItemId,way:this.getWay(),refundPrice:this.orderItem.payPrice,applyReason:this.reasons[this.reasonIndex],applyDescription:a.applyDescription,applyPicUrls:this.applyPicUrls}).then((function(e){t.$util.Tips({title:"申请成功",icon:"success"},{tab:5,url:"/pages/users/user_return_detail/index?id="+e.data})})).catch((function(e){return t.$util.Tips({title:e})}))}}};t.default=u},"2f09":function(e,t,a){"use strict";a("7a82");var r=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.getTradeConfig=function(){return i.default.get("app-api/trade/config/get")};var i=r(a("e145"))},"4a10":function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){}));var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",[a("v-uni-form",{attrs:{"report-submit":"true"},on:{submit:function(t){arguments[0]=t=e.$handleEvent(t),e.subRefund.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"apply-return"},[a("v-uni-view",{staticClass:"goodsStyle acea-row row-between borRadius14"},[a("v-uni-view",{staticClass:"pictrue"},[a("v-uni-image",{attrs:{src:e.orderItem.picUrl}})],1),a("v-uni-view",{staticClass:"text acea-row row-between"},[a("v-uni-view",{staticClass:"name line2"},[e._v(e._s(e.orderItem.spuName))]),a("v-uni-view",{staticClass:"money"},[a("v-uni-view",[e._v("￥"+e._s((parseFloat(e.orderItem.price)/100).toFixed(2)))]),a("v-uni-view",{staticClass:"num"},[e._v("x"+e._s(e.orderItem.count))])],1)],1)],1),a("v-uni-view",{staticClass:"list borRadius14"},[a("v-uni-view",{staticClass:"item acea-row row-between-wrapper"},[a("v-uni-view",[e._v("售后方式")]),10===e.order.status?a("v-uni-view",{},[e._v("仅退款")]):a("v-uni-picker",{staticClass:"num",attrs:{value:e.wayIndex,range:e.ways},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.wayChange.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"picker acea-row row-between-wrapper"},[a("v-uni-view",{staticClass:"reason"},[e._v(e._s(e.ways[e.wayIndex]))]),a("v-uni-text",{staticClass:"iconfont icon-jiantou"})],1)],1)],1),a("v-uni-view",{staticClass:"item acea-row row-between-wrapper"},[a("v-uni-view",[e._v("退货件数")]),a("v-uni-view",{staticClass:"num"},[e._v(e._s(e.orderItem.count))])],1),a("v-uni-view",{staticClass:"item acea-row row-between-wrapper"},[a("v-uni-view",[e._v("退款金额")]),a("v-uni-view",{staticClass:"num"},[e._v("￥"+e._s((parseFloat(e.orderItem.payPrice)/100).toFixed(2)))])],1),a("v-uni-view",{staticClass:"item acea-row row-between-wrapper"},[a("v-uni-view",[e._v("退款原因")]),a("v-uni-picker",{staticClass:"num",attrs:{value:e.reasonIndex,range:e.reasons},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.bindPickerChange.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"picker acea-row row-between-wrapper"},[a("v-uni-view",{staticClass:"reason"},[e._v(e._s(e.reasons[e.reasonIndex]))]),a("v-uni-text",{staticClass:"iconfont icon-jiantou"})],1)],1)],1),a("v-uni-view",{staticClass:"item textarea acea-row row-between"},[a("v-uni-view",[e._v("备注说明")]),a("v-uni-textarea",{staticClass:"num",attrs:{placeholder:"填写备注信息，100字以内",name:"applyDescription","placeholder-class":"填写备注信息，100字以内"}})],1),a("v-uni-view",{staticClass:"item acea-row row-between",staticStyle:{border:"none"}},[a("v-uni-view",{staticClass:"title acea-row row-between-wrapper"},[a("v-uni-view",[e._v("上传凭证")]),a("v-uni-view",{staticClass:"tip"},[e._v("( 最多可上传3张 )")])],1),a("v-uni-view",{staticClass:"upload acea-row row-middle"},[e._l(e.applyPicUrls,(function(t,r){return a("v-uni-view",{key:r,staticClass:"pictrue"},[a("v-uni-image",{attrs:{src:t}}),a("v-uni-view",{staticClass:"iconfont icon-guanbi1 font-color",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.DelPic(r)}}})],1)})),e.applyPicUrls.length<3?a("v-uni-view",{staticClass:"pictrue acea-row row-center-wrapper row-column",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.uploadpic.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"iconfont icon-icon25201"}),a("v-uni-view",[e._v("上传凭证")])],1):e._e()],2)],1),a("v-uni-button",{staticClass:"returnBnt bg-color",attrs:{"form-type":"submit"}},[e._v("提交")])],1)],1)],1)],1)},i=[]},af1e:function(e,t,a){var r=a("24fb");t=r(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* crmeb颜色变量 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.apply-return[data-v-627c5d03]{padding:%?20?% %?30?% %?70?% %?30?%}.apply-return .list[data-v-627c5d03]{background-color:#fff;margin-top:%?18?%;padding:0 %?24?% %?70?% %?24?%}.apply-return .list .item[data-v-627c5d03]{min-height:%?90?%;border-bottom:%?1?% solid #eee;font-size:%?30?%;color:#333}.apply-return .list .item .num[data-v-627c5d03]{color:#282828;width:%?427?%;text-align:right}.apply-return .list .item .num .picker .reason[data-v-627c5d03]{width:%?385?%}.apply-return .list .item .num .picker .iconfont[data-v-627c5d03]{color:#666;font-size:%?30?%;margin-top:%?2?%}.apply-return .list .item.textarea[data-v-627c5d03]{padding:%?24?% 0}.apply-return .list .item uni-textarea[data-v-627c5d03]{height:%?100?%;font-size:%?30?%}.apply-return .list .item .placeholder[data-v-627c5d03]{color:#bbb}.apply-return .list .item .title[data-v-627c5d03]{height:%?95?%;width:100%}.apply-return .list .item .title .tip[data-v-627c5d03]{font-size:%?30?%;color:#bbb}.apply-return .list .item .upload[data-v-627c5d03]{padding-bottom:%?36?%}.apply-return .list .item .upload .pictrue[data-v-627c5d03]{border-radius:%?14?%;margin:%?22?% %?23?% 0 0;width:%?156?%;height:%?156?%;position:relative;font-size:%?24?%;color:#bbb}.apply-return .list .item .upload .pictrue[data-v-627c5d03]:nth-of-type(4n){margin-right:0}.apply-return .list .item .upload .pictrue uni-image[data-v-627c5d03]{width:100%;height:100%;border-radius:%?14?%}.apply-return .list .item .upload .pictrue .icon-guanbi1[data-v-627c5d03]{position:absolute;font-size:%?45?%;top:%?-10?%;right:%?-10?%}.apply-return .list .item .upload .pictrue .icon-icon25201[data-v-627c5d03]{color:#bfbfbf;font-size:%?50?%}.apply-return .list .item .upload .pictrue[data-v-627c5d03]:nth-last-child(1){border:%?1?% solid #ddd;box-sizing:border-box}.apply-return .returnBnt[data-v-627c5d03]{font-size:%?32?%;color:#fff;width:100%;height:%?86?%;border-radius:%?50?%;text-align:center;line-height:%?86?%;margin:%?43?% auto}',""]),e.exports=t},ca02:function(e,t,a){"use strict";a("7a82");var r=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.cancelAfterSale=function(e){return i.default.delete("app-api/trade/after-sale/cancel?id="+e)},t.createAfterSale=function(e){return i.default.post("app-api/trade/after-sale/create",e)},t.deliveryAfterSale=function(e){return i.default.put("app-api/trade/after-sale/delivery",e)},t.getAfterSale=function(e){return i.default.get("app-api/trade/after-sale/get",{id:e})},t.getAfterSalePage=function(e){return i.default.get("app-api/trade/after-sale/page",e)},t.getApplyingAfterSaleCount=function(){return i.default.get("app-api/trade/after-sale/get-applying-count")};var i=r(a("e145"))},cdb3:function(e,t,a){"use strict";var r=a("e68a"),i=a.n(r);i.a},d841:function(e,t,a){"use strict";a.r(t);var r=a("2ca4"),i=a.n(r);for(var n in r)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(n);t["default"]=i.a},d8f1:function(e,t,a){"use strict";a.r(t);var r=a("4a10"),i=a("d841");for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(n);a("cdb3");var s=a("f0c5"),o=Object(s["a"])(i["default"],r["b"],r["c"],!1,null,"627c5d03",null,!1,r["a"],void 0);t["default"]=o.exports},e68a:function(e,t,a){var r=a("af1e");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var i=a("4f06").default;i("22b86b42",r,!0,{sourceMap:!1,shadowMode:!1})}}]);